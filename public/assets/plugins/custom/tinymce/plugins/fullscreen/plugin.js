!function(n){"use strict";var t=function(n){var t=n;return{get:function(){return t},set:function(n){t=n}}},e=tinymce.util.Tools.resolve("tinymce.PluginManager"),r=function(n){return{isFullscreen:function(){return null!==n.get()}}},o=function(){},u=function(n){return function(){return n}},i=u(!1),c=u(!0),l=function(){return f},f=function(){var n=function(n){return n.isNone()},t=function(n){return n()},e=function(n){return n};return{fold:function(n,t){return n()},is:i,isSome:i,isNone:c,getOr:e,getOrThunk:t,getOrDie:function(n){throw new Error(n||"error: getOrDie called on none.")},getOrNull:u(null),getOrUndefined:u(void 0),or:e,orThunk:t,map:l,each:o,bind:l,exists:i,forall:c,filter:l,equals:n,equals_:n,toArray:function(){return[]},toString:u("none()")}}(),a=function(n){var t=u(n),e=function(){return o},r=function(t){return t(n)},o={fold:function(t,e){return e(n)},is:function(t){return n===t},isSome:c,isNone:i,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:e,orThunk:e,map:function(t){return a(t(n))},each:function(t){t(n)},bind:r,exists:r,forall:r,filter:function(t){return t(n)?o:f},toArray:function(){return[n]},toString:function(){return"some("+n+")"},equals:function(t){return t.is(n)},equals_:function(t,e){return t.fold(i,function(t){return e(n,t)})}};return o},s={some:a,none:l,from:function(n){return null==n?f:a(n)}},m=function(){return n=function(n){n.unbind()},e=t(s.none()),r=function(){e.get().each(n)},{clear:function(){r(),e.set(s.none())},isSet:function(){return e.get().isSome()},set:function(n){r(),e.set(s.some(n))}};var n,e,r},d=function(n){return function(t){return r=typeof(e=t),(null===e?"null":"object"===r&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"===r&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":r)===n;var e,r}},h=function(n){return function(t){return typeof t===n}},p=d("string"),v=d("array"),g=h("boolean"),y=function(n){return!function(n){return null==n}(n)},w=h("function"),b=h("number"),S=Array.prototype.push,T=function(n,t){for(var e=n.length,r=new Array(e),o=0;o<e;o++){var u=n[o];r[o]=t(u,o)}return r},x=function(n,t){for(var e=0,r=n.length;e<r;e++){t(n[e],e)}},D=function(n,t){for(var e=[],r=0,o=n.length;r<o;r++){var u=n[r];t(u,r)&&e.push(u)}return e},E=function(n,t){return function(n){for(var t=[],e=0,r=n.length;e<r;++e){if(!v(n[e]))throw new Error("Arr.flatten item "+e+" was not an array, input: "+n);S.apply(t,n[e])}return t}(T(n,t))},A=Object.keys,N=function(n){return void 0!==n.style&&w(n.style.getPropertyValue)},O=function(n){if(null==n)throw new Error("Node cannot be null or undefined");return{dom:u(n)}},C={fromHtml:function(t,e){var r=(e||n.document).createElement("div");if(r.innerHTML=t,!r.hasChildNodes()||r.childNodes.length>1)throw n.console.error("HTML does not have a single root node",t),new Error("HTML must have a single root node");return O(r.childNodes[0])},fromTag:function(t,e){var r=(e||n.document).createElement(t);return O(r)},fromText:function(t,e){var r=(e||n.document).createTextNode(t);return O(r)},fromDom:O,fromPoint:function(n,t,e){var r=n.dom();return s.from(r.elementFromPoint(t,e)).map(O)}},M=(void 0!==n.window?n.window:Function("return this;")(),function(n){return function(t){return function(n){return n.dom().nodeType}(t)===n}}),k=M(1),F=M(3),P=M(9),L=M(11),H=function(n,t){var e=n.dom();if(1!==e.nodeType)return!1;var r=e;if(void 0!==r.matches)return r.matches(t);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(t);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(t);if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},q=function(n){return function(n){return s.from(n.dom().parentNode).map(C.fromDom)}(n).map(V).map(function(t){return D(t,function(t){return e=t,!(n.dom()===e.dom());var e})}).getOr([])},V=function(n){return T(n.dom().childNodes,C.fromDom)},W=w(n.Element.prototype.attachShadow)&&w(n.Node.prototype.getRootNode),j=u(W),z=W?function(n){return C.fromDom(n.dom().getRootNode())}:function(n){return P(n)?n:(t=n,C.fromDom(t.dom().ownerDocument));var t},B=function(n){var t=z(n);return L(t)?s.some(t):s.none()},I=function(n){return C.fromDom(n.dom().host)},R=function(n){if(j()&&y(n.target)){var t=C.fromDom(n.target);if(k(t)&&U(C.fromDom(n.target))){var e=n;if(e.composed&&e.composedPath){var r=e.composedPath();if(r)return 0===(o=r).length?s.none():s.some(o[0])}}}var o;return s.from(n.target)},U=function(n){return y(n.dom().shadowRoot)},_=function(n){var t,e,r=F(n)?n.dom().parentNode:n.dom();return null!=r&&null!==r.ownerDocument&&B(C.fromDom(r)).fold(function(){return r.ownerDocument.body.contains(r)},(t=_,e=I,function(n){return t(e(n))}))},K=function(t,e,r){!function(t,e,r){if(!(p(r)||g(r)||b(r)))throw n.console.error("Invalid call to Attr.set. Key ",e,":: Value ",r,":: Element ",t),new Error("Attribute value was not simple");t.setAttribute(e,r+"")}(t.dom(),e,r)},X=function(n,t){var e=n.dom().getAttribute(t);return null===e?void 0:e},Y=function(n,t){n.dom().removeAttribute(t)},G=function(t,e){var r=t.dom();!function(n,t){for(var e=A(n),r=0,o=e.length;r<o;r++){var u=e[r];t(n[u],u)}}(e,function(t,e){!function(t,e,r){if(!p(r))throw n.console.error("Invalid call to CSS.set. Property ",e,":: Value ",r,":: Element ",t),new Error("CSS value must be a string: "+r);N(t)&&t.style.setProperty(e,r)}(r,e,t)})},J=function(n,t){return N(n)?n.style.getPropertyValue(t):""},Q=function(n){var t,e,r=C.fromDom(R(n).getOr(n.target)),o=function(){return n.stopPropagation()},i=function(){return n.preventDefault()},c=(t=i,e=o,function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t(e.apply(null,n))});return function(n,t,e,r,o,i,c){return{target:u(n),x:u(t),y:u(e),stop:r,prevent:o,kill:i,raw:u(c)}}(r,n.clientX,n.clientY,o,i,c,n)},Z=function(n,t){return{left:u(n),top:u(t),translate:function(e,r){return Z(n+e,t+r)}}},$=Z,nn=function(t){var e=void 0===t?n.window:t;return s.from(e.visualViewport)},tn=function(n,t,e,r){return{x:n,y:t,width:e,height:r,right:n+e,bottom:t+r}},en=function(t){var e=void 0===t?n.window:t,r=e.document,o=function(t){var e=void 0!==t?t.dom():n.document,r=e.body.scrollLeft||e.documentElement.scrollLeft,o=e.body.scrollTop||e.documentElement.scrollTop;return $(r,o)}(C.fromDom(r));return nn(e).fold(function(){var n=e.document.documentElement,t=n.clientWidth,r=n.clientHeight;return tn(o.left(),o.top(),t,r)},function(n){return tn(Math.max(n.pageLeft,o.left()),Math.max(n.pageTop,o.top()),n.width,n.height)})},rn=function(n,t,e){return nn(e).map(function(t){var e=function(n){return Q(n)};return t.addEventListener(n,e),{unbind:function(){return t.removeEventListener(n,e)}}}).getOrThunk(function(){return{unbind:o}})},on=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),un=tinymce.util.Tools.resolve("tinymce.Env"),cn=tinymce.util.Tools.resolve("tinymce.util.Delay"),ln=function(n,t){n.fire("FullscreenStateChanged",{state:t})},fn=function(n,t,e){return D(function(n,t){for(var e=w(t)?t:i,r=n.dom(),o=[];null!==r.parentNode&&void 0!==r.parentNode;){var u=r.parentNode,c=C.fromDom(u);if(o.push(c),!0===e(c))break;r=u}return o}(n,e),t)},an=function(t){return function(t,e){var r,o=void 0===e?n.document:e.dom();return 1!==(r=o).nodeType&&9!==r.nodeType&&11!==r.nodeType||0===r.childElementCount?[]:T(o.querySelectorAll(t),C.fromDom)}(t)},sn=function(n,t,e){return fn(n,function(n){return H(n,t)},e)},mn=function(n,t){return function(n,t){return D(q(n),t)}(n,function(n){return H(n,t)})},dn="data-ephox-mobile-fullscreen-style",hn="top:0!important;left:0!important;margin:0!important;padding:0!important;width:100%!important;height:100%!important;overflow:visible!important;",pn=un.os.isAndroid(),vn=function(t){var e,r,o,u,i=(r="background-color",o=(e=t).dom(),""!==(u=n.window.getComputedStyle(o).getPropertyValue(r))||_(e)?u:J(o,r));return void 0!==i&&""!==i?"background-color:"+i+"!important":"background-color:rgb(255,255,255)!important;"},gn=on.DOM,yn=nn().fold(function(){return{bind:o,unbind:o}},function(e){var r,o=(r=t(s.none()),{clear:function(){r.set(s.none())},set:function(n){r.set(s.some(n))},isSet:function(){return r.get().isSome()},on:function(n){r.get().each(n)}}),u=m(),i=m(),c=cn.throttle(function(){n.document.body.scrollTop=0,n.document.documentElement.scrollTop=0,n.window.requestAnimationFrame(function(){o.on(function(n){return G(n,{top:e.offsetTop+"px",left:e.offsetLeft+"px",height:e.height+"px",width:e.width+"px"})})})},50);return{bind:function(n){o.set(n),c(),u.set(rn("resize")),i.set(rn("scroll"))},unbind:function(){o.on(function(){u.clear(),i.clear()}),o.clear()}}}),wn=function(t,e){var r,o,u=n.document.body,i=n.document.documentElement,c=t.getContainer(),l=C.fromDom(c),f=e.get(),a=C.fromDom(t.getBody()),s=un.deviceType.isTouch(),m=c.style,d=t.iframeElement.style,h=function(){var n,e;s&&(n=t.dom,e=an("["+dn+"]"),x(e,function(t){var e=X(t,dn);"no-styles"!==e?G(t,n.parseStyle(e)):Y(t,"style"),Y(t,dn)})),gn.removeClass(u,"tox-fullscreen"),gn.removeClass(i,"tox-fullscreen"),gn.removeClass(c,"tox-fullscreen"),yn.unbind()};if(f)d.width=f.iframeWidth,d.height=f.iframeHeight,m.width=f.containerWidth,m.height=f.containerHeight,m.top=f.containerTop,m.left=f.containerLeft,r=f.scrollPos,n.window.scrollTo(r.x,r.y),e.set(null),ln(t,!1),h(),t.off("remove",h);else{var p={scrollPos:(o=en(n.window),{x:o.x,y:o.y}),containerWidth:m.width,containerHeight:m.height,containerTop:m.top,containerLeft:m.left,iframeWidth:d.width,iframeHeight:d.height};s&&function(n,t,e){var r=function(t){return function(e){var r=X(e,"style"),o=void 0===r?"no-styles":r.trim();o!==t&&(K(e,dn,o),G(e,n.parseStyle(t)))}},o=sn(t,"*"),u=E(o,function(n){return mn(n,"*:not(.tox-silver-sink)")}),i=vn(e);x(u,r("display:none!important;")),x(o,r("position:absolute!important;"+hn+i)),r((!0===pn?"":"position:absolute!important;")+hn+i)(t)}(t.dom,l,a),d.width=d.height="100%",m.width=m.height="",gn.addClass(u,"tox-fullscreen"),gn.addClass(i,"tox-fullscreen"),gn.addClass(c,"tox-fullscreen"),yn.bind(l),t.on("remove",h),e.set(p),ln(t,!0)}},bn=function(n,t){n.addCommand("mceFullScreen",function(){wn(n,t)})},Sn=function(n,t){return function(e){e.setActive(null!==t.get());var r=function(n){return e.setActive(n.state)};return n.on("FullscreenStateChanged",r),function(){return n.off("FullscreenStateChanged",r)}}},Tn=function(n,t){n.ui.registry.addToggleMenuItem("fullscreen",{text:"Fullscreen",icon:"fullscreen",shortcut:"Meta+Shift+F",onAction:function(){return n.execCommand("mceFullScreen")},onSetup:Sn(n,t)}),n.ui.registry.addToggleButton("fullscreen",{tooltip:"Fullscreen",icon:"fullscreen",onAction:function(){return n.execCommand("mceFullScreen")},onSetup:Sn(n,t)})};e.add("fullscreen",function(n){var e=t(null);return n.inline?r(e):(bn(n,e),Tn(n,e),n.addShortcut("Meta+Shift+F","","mceFullScreen"),r(e))})}(window);